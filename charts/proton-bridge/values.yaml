replicaCount: 1

image:
  repository: ghcr.io/mgarratt/docker-images/proton-bridge
  tag: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  annotations: {}
  smtp:
    port: 25
  imap:
    port: 143

persistence:
  enabled: true
  existingClaim: ""
  accessModes:
    - ReadWriteOnce
  size: 2Gi
  storageClassName: ""

bridge:
  host: "127.0.0.1"
  smtpPort: 1025
  imapPort: 1143
  mode: noninteractive

container:
  smtpPort: 1025
  imapPort: 1143
  # Set true to add NET_BIND_SERVICE capability so non-root process can bind <1024 (e.g. 25/143).
  enablePrivilegedPortBinding: false

# Pod-level security context defaults for the bridge image user (uid:gid 1000:1000).
podSecurityContext:
  fsGroup: 1000
  fsGroupChangePolicy: OnRootMismatch

# Container-level security context defaults for the bridge image user (uid:gid 1000:1000).
containerSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000

# Optional init container to force volume ownership/permissions before bridge starts.
volumePermissions:
  enabled: false
  image:
    repository: busybox
    tag: "1.37.0"
    pullPolicy: IfNotPresent
  securityContext:
    runAsUser: 0
    runAsGroup: 0
  mountPath: /home/bridge
  chown: "1000:1000"
  chmod: "u+rwX,g+rwX"

existingSecret: ""
secretName: ""

# Additional literal env vars.
extraEnv: []

podAnnotations: {}
podLabels: {}

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}
